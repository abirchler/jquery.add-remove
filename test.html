<!doctype HTML>
<html>
  <head>
    <title>jQuery.add-remove Test Page</title>
    <link rel="stylesheet" type="text/css" href="test.css"/>
    <script
      src="///code.jquery.com/jquery-3.2.1.js"
      type="text/javascript"
      integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
      crossorigin="anonymous"></script>
    <script
      src="jquery.add-remove.js"
      type="text/javascript"
    ></script>
    <script type="text/javascript">

      jQuery(function($){

        function flashClass(element, className){

          var t = $(element);

          t.addClass(className);

          setTimeout(function(){
            t.removeClass(className);
          }, 500);

        }

        $("#container").addRemove({});

        $("#table-form").addRemove({
          container: "tbody",
          template: "tbody tr:last"
        });

        $("#row-sel-test").click(function(){

          $(":add_remove_row").addClass("highlight");
          setTimeout(function(){
            $(":add_remove_row").removeClass("highlight");
          }, 3000);
        });

        $(document).on("add_remove:add", function(evt){
          flashClass(evt.target, "added")
        })
        .on("add_remove:remove", function(evt, data){

          console.log("Row removed: ");
          console.log(data.element);

          flashClass(evt.target, "removed");
        })
        .on("add_remove:renumber", function(evt){
          flashClass(evt.target, "renumber");
        })
        ;
      });

    </script>
  </head>
  <body>
    <h1>Test page for the jquery.add-remove plugin</h1>

    <form class="add-remove">

      <div id="container">

        <button type="button" class="add-button">+</button>

        <ul class="container">
          <li class="row">

            <span>
              <label for="test-field-1">Test Field</label>
              <input type="text" id="test-field-1" name="test_field[1]"/>
            </span>

            <button class="remove-button" type="button">-</button>

          </li>
        </ul>

        <button type="button" class="add-button">+</button>

      </div>

    </form>

    <form class="add-remove">

      <div id="table-form">

        <table>
          <thead>
            <tr>
              <th>Field 1</th>
              <th>Field 2</th>
              <th>
                <button type="button" class="add-button">+</button>
              </th>
            </tr>
          </thead>
          <tbody class="container">
            <tr class="row">
              <td>
                <input type="text" id="field_1-0" name="field_1[0]"/>
              </td>
              <td>
                <input type="email" id="field_2-0" name="field_2[0]"/>
              </td>
              <td>
                <button type="button" class="remove-button">-</button>
              </td>
            </tr>
          </tbody>
          <thead>
            <tr>
              <td colspan="2"></td>
              <td>
                <button type="button" class="add-button">+</button>
              </td>
            </tr>
          </thead>
        </table>

      </div>

    </form>

    <div>
      <button id="row-sel-test" type="button">Test Row Selector</button>
    </div>

  </body>
</html>
